Starting ./limit_vfssize_test.exp

************** STEP 1: Start kermit.

C-Kermit 8.0.211, 10 Apr 2004, for Linux
 Copyright (C) 1985, 2004,
  Trustees of Columbia University in the City of New York.
Type ? or HELP for help.
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>set line /dev/ttyS0
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>set speed 57600
/dev/ttyS0, 57600 bps
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>set carrier-watch off
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>set handshake none
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>set flow-control none
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>robust
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>set file type bin
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>set file name lit
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>set rec pack 1000
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>set send pack 1000
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>set window 5
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>set escape 255
(/home/test/checkouts/testsuites.trunk/limit_vfssize/) C-Kermit>connect
Connecting to /dev/ttyS0, speed 57600
 Escape character: Code 255 (ÿ): enabled
Type the escape character followed by C to get back,

************** STEP 2: Reboot the kernel.

Try to figure out if we are in u-boot or the kernelversion
or followed by ? to see other options.
----------------------------------------------------
version
Linux release 2.6.21.5-ADI-2007R2-pre-svn3329, build #22 Tue Jun 26 15:31:17 CST 2007
 release 1.0.0, build #70 Tue Jun 26 15:31:42 CST 2007
root:~> We are in the kernel
sending reboot
reboot
Restarting system.þU-Boot 1.1.6-svn760 (ADI-2007R2-pre) (May 21 2007 - 14:49:32)

CPU:   ADSP BF537 Rev.: 0.2
Board: ADI BF537 stamp board
       Support: http://blackfin.uclinux.org/
Clock: VCO: 500 MHz, Core: 500 MHz, System: 100 MHz
SDRAM: 64 MB
FLASH:   4 MB
In:    serial
Out:   serial
Err:   serial
Net:    BF537 ETHERNET
I2C:   ready
Hit any key to stop autoboot:  9  0 
bf537> set bootargs root=/dev/mtdblock0 rw
bf537> set serverip 10.100.4.174
bf537> set ipaddr 10.100.4.50
bf537> save
Saving Environment to Flash...
Un-Protected 1 sectors
Erasing Flash...
Erasing Flash locations, Please Wait
.
Erased 1 sectors
Writing to Flash... done
Protected 1 sectors
bf537> tftpboot 0x2000000 linux
Using BF537 ETHERNET device
TFTP from server 10.100.4.174; our IP address is 10.100.4.50
Filename 'linux'.
Load address: 0x2000000
Loading: *#################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 ##############
done
Bytes transferred = 18705902 (11d6dee hex)
Image size is 11d6dee
bf537> bootelf
Loading .text @ 0x00001000 (999440 bytes)
Loading .rodata @ 0x000f6000 (199420 bytes)
Loading __ksymtab @ 0x00126afc (13896 bytes)
Loading __ksymtab_gpl @ 0x0012a144 (3608 bytes)
Loading __ksymtab_strings @ 0x0012af5c (41764 bytes)
Loading __param @ 0x00135280 (300 bytes)
Loading .data @ 0x00136000 (65536 bytes)
Loading .init @ 0x00146000 (67200 bytes)
Loading .text_l1 @ 0xffa00000 (8516 bytes)
sh_addr: FFA00000, p_paddr: 00156680
Loading from: 02157000 to 00156680, size: 8516
Loading .data_l1 @ 0xff800000 (6464 bytes)
sh_addr: FF800000, p_paddr: 001587C4
Loading from: 0215A000 to 001587C4, size: 6464
Clearing .bss @ 0x0015a104 (57744 bytes)
Loading .romfs @ 0x00168294 (16777216 bytes)
## Starting application at 0x00146000 ...
Linux version 2.6.21.5-ADI-2007R2-pre-svn3329 (test@linux) (gcc version 4.1.2 (ADI svn)) #22 Tue Jun 26 15:31:17 CST 2007
Hardware Trace Active and Enabled
Warning: limiting memory to 47MB due to hardware anomaly 05000263
Blackfin support (C) 2004-2007 Analog Devices, Inc.
Compiled for ADSP-BF537 Rev 0.2
Blackfin Linux support by http://blackfin.uclinux.org/
Processor Speed: 500 MHz core clock and 100 Mhz System Clock
Board Memory: 64MB
Kernel Managed Memory: 64MB
Memory map:
  text      = 0x00001000-0x000f5010
  rodata    = 0x000f6000-0x001353ac
  data      = 0x00136000-0x00146000
    stack   = 0x00136000-0x00138000
  init      = 0x00146000-0x0015a104
  bss       = 0x0015a104-0x00168294
  available = 0x00168294-0x02f00000
  rootfs    = 0x02f00000-0x03f00000
  DMA Zone  = 0x03f00000-0x04000000
Instruction Cache Enabled
Data Cache Enabled (write-through)
Built 1 zonelists.  Total pages: 11938
Kernel command line: root=/dev/mtdblock0 rw
Configuring Blackfin Priority Driven Interrupts
PID hash table entries: 256 (order: 8, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Physical pages: 2f00
Memory available: 46088k/64296k RAM, (80k init code, 976k kernel code, 56k data, 1024k dma)
Blackfin Scratchpad data SRAM: 4 KB
Blackfin Data A SRAM: 16 KB (9 KB free)
Blackfin Data B SRAM: 16 KB (16 KB free)
Blackfin Instruction SRAM: 48 KB (39 KB free)
Security Framework v1.0.0 initialized
Mount-cache hash table entries: 512
NET: Registered protocol family 16
Blackfin GPIO Controller
Blackfin DMA Controller
stamp_init(): registering device resources
after init resources
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
io scheduler noop registered
io scheduler anticipatory registered (default)
io scheduler cfq registered
Dynamic Power Management Controller Driver v0.1: major=10, minor = 254
bfin-wdt: initialized: timeout=20 sec (nowayout=0)
Serial: Blackfin serial driver
bfin-uart.1: ttyBF0 at MMIO 0xffc00400 (irq = 18) is a BFIN-UART
RAMDISK driver initialized: 16 RAM disks of 4096K size 1024 blocksize
Blackfin mac net device registered
uclinux[mtd]: RAM probe address=0x2f00000 size=0x1000000
Creating 1 MTD partitions on "RAM":
0x00000000-0x01000000 : "ROMfs"
uclinux[mtd]: set ROMfs:EXT2  to be root filesystem
rtc-bfin rtc-bfin: rtc core: registered rtc-bfin as rtc0
TCP cubic registered
NET: Registered protocol family 1
NET: Registered protocol family 17
rtc-bfin rtc-bfin: setting the system clock to 1978-12-12 05:02:24 (282286944)
VFS: Mounted root (ext2 filesystem).
Freeing unused kernel memory: 80k freed (0x146000 - 0x159000)
dma_alloc_init: dma_page @ 0x00155000 - 256 pages at 0x03f00000

Welcome to:
       ____ _  _                   
      /  __| ||_|             _  _ 
 _   _| |  | | _ ____  _   _ \ \/ /
| | | | |  | || |  _ \| | | | \  /
| |_| | |__| || | | | | |_| | /  \
|  ___\____|_||_|_| |_|\____|/_/\_\
|_|                                   

For further information see:
http://www.uclinux.org/
http://blackfin.uclinux.org/



BusyBox v1.4.1 (2007-06-26 14:52:03 CST) Built-in shell (msh)
Enter 'help' for a list of built-in commands.

root:~> 
************** STEP 3: Starting test.

cat /proc/meminfo
MemTotal:        46188 kB
Case 1 ...PASS

Case 1 ...PASS

MemFree:         42480 kB
Buffers:            68 kB
Cached:            628 kB
SwapCached:          0 kB
Active:            564 kB
Inactive:          100 kB
SwapTotal:           0 kB
SwapFree:            0 kB
Dirty:              12 kB
Writeback:           0 kB
AnonPages:           0 kB
Mapped:              0 kB
Slab:              744 kB
SReclaimable:      264 kB
SUnreclaim:        480 kB
PageTables:          0 kB
NFS_Unstable:        0 kB
Bounce:              0 kB
CommitLimit:     23092 kB
Committed_AS:        0 kB
VmallocTotal:        0 kB
VmallocUsed:         0 kB
VmallocChunk:        0 kB
root:~> echo 10 > /proc/sys/vm/pagecache_ratio
root:~> 
Case 2 ...PASS

Case 2 ...PASS

Copy large file to target board done
cat /proc/meminfo
MemTotal:        46188 kB
MemFree:         38208 kB
Buffers:           140 kB
Cached:           4516 kB
SwapC
Case 3 ...PASS

Case 3 ...PASS


LIMIT VFSSIZE TEST ............[PASS]
Ending ./limit_vfssize_test.exp

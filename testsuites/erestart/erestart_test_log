Starting ./erestart_test.exp

************** STEP 1: Spawn kermit

C-Kermit 8.0.211, 10 Apr 2004, for Linux
 Copyright (C) 1985, 2004,
  Trustees of Columbia University in the City of New York.
Type ? or HELP for help.
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set line /dev/ttyS0
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set speed 57600
/dev/ttyS0, 57600 bps
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set carrier-watch off
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set handshake none
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set flow-control none
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>robust
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set file type bin
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set file name lit
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set rec pack 1000
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set send pack 1000
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set window 5
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set escape 255
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>connect
Connecting to /dev/ttyS0, speed 57600
 Escape character: Code 255 (ÿ): enabled
Type the escape character followed by C to get back,

************** STEP 2: Reboot the kernel.

Try to figure out if we are in u-boot or the kernelor followed by ? to see other options.
version
----------------------------------------------------
version
Linux release 2.6.21.3-ADI-2007R2-pre-svn3227, build #22 Mon Jun 4 12:17:08 CST 2007
 release 1.0.0, build #30 Mon Jun 4 12:16:30 CST 2007
root:/bin> We are in the kernel
sending reboot
rebooRestarting system.þU-Boot 1.1.6-svn760 (ADI-2007R2-pre) (May 21 2007 - 14:49:32)

CPU:   ADSP BF537 Rev.: 0.2
Board: ADI BF537 stamp board
       Support: http://blackfin.uclinux.org/
Clock: VCO: 500 MHz, Core: 500 MHz, System: 100 MHz
SDRAM: 64 MB
FLASH:   4 MB
In:    serial
Out:   serial
Err:   serial
Net:    BF537 ETHERNET
I2C:   ready
Hit any key to stop autoboot:  9  0 
bf537> set bootargs root=/dev/mtdblock0 rw
bf537> set serverip 10.100.4.174
bf537> set ipaddr 10.100.4.50
bf537> save
Saving Environment to Flash...
Un-Protected 1 sectors
Erasing Flash...
Erasing Flash locations, Please Wait
.
Erased 1 sectors
Writing to Flash... done
Protected 1 sectors
bf537> tftpboot 0x2000000 linux
Using BF537 ETHERNET device
TFTP from server 10.100.4.174; our IP address is 10.100.4.50
Filename 'linux'.
Load address: 0x2000000
Loading: *#################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
done
Bytes transferred = 3991036 (3ce5fc hex)
Image size is 3ce5fc
bf537> bootelf
Loading .text @ 0x00001000 (1299404 bytes)
Loading .init @ 0x0013e3cc (2085440 bytes)
Loading .text_l1 @ 0xffa00000 (8476 bytes)
sh_addr: FFA00000, p_paddr: 0033B60C
Loading from: 0233C000 to 0033B60C, size: 8476
Loading .data_l1 @ 0xff800000 (6464 bytes)
sh_addr: FF800000, p_paddr: 0033D728
Loading from: 0233F000 to 0033D728, size: 6464
Loading .data @ 0x0033f080 (69504 bytes)
Clearing .bss @ 0x00350000 (58228 bytes)
## Starting application at 0x0013f000 ...
Linux version 2.6.21.3-ADI-2007R2-pre-svn3227 (test@linux) (gcc version 4.1.2 (ADI svn)) #22 Mon Jun 4 12:17:08 CST 2007
Warning: limiting memory to 56MB due to hardware anomaly 05000263
Blackfin support (C) 2004-2007 Analog Devices, Inc.
Compiled for ADSP-BF537 Rev 0.2
Blackfin Linux support by http://blackfin.uclinux.org/
Processor Speed: 500 MHz core clock and 100 Mhz System Clock
Board Memory: 64MB
Kernel Managed Memory: 64MB
Memory map:
  text      = 0x00001000-0x0013e3cc
  init      = 0x0013f000-0x0033b60c
  data      = 0x0033f080-0x00350000
  stack     = 0x00340000-0x00342000
  bss       = 0x00350000-0x0035e374
  available = 0x0035e374-0x037ff000
  DMA Zone  = 0x03f00000-0x04000000
Instruction Cache Enabled
Data Cache Enabled (write-through)
Hardware Trace Enabled
Built 1 zonelists.  Total pages: 14224
Kernel command line: 
Configuring Blackfin Priority Driven Interrupts
PID hash table entries: 256 (order: 8, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Physical pages: 37ff
Memory available: 53252k/62211k RAM, (2033k init code, 1268k kernel code, 56k data, 1024k dma)
Blackfin Scratchpad data SRAM: 4 KB
Blackfin Data A SRAM: 16 KB (9 KB free)
Blackfin Data B SRAM: 16 KB (16 KB free)
Blackfin Instruction SRAM: 48 KB (39 KB free)
Security Framework v1.0.0 initialized
Mount-cache hash table entries: 512
NET: Registered protocol family 16
Blackfin GPIO Controller
Blackfin DMA Controller
stamp_init(): registering device resources
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
io scheduler noop registered
io scheduler anticipatory registered (default)
io scheduler cfq registered
Dynamic Power Management Controller Driver v0.1: major=10, minor = 254
bfin-wdt: initialized: timeout=20 sec (nowayout=0)
Serial: Blackfin serial driver
bfin-uart.1: ttyBF0 at MMIO 0xffc00400 (irq = 18) is a BFIN-UART
RAMDISK driver initialized: 16 RAM disks of 4096K size 1024 blocksize
Blackfin mac net device registered
rtc-bfin rtc-bfin: rtc core: registered rtc-bfin as rtc0
TCP cubic registered
NET: Registered protocol family 1
NET: Registered protocol family 17
rtc-bfin rtc-bfin: setting the system clock to 1980-06-05 20:58:25 (329086705)
Freeing unused kernel memory: 2032k freed (0x13f000 - 0x33a000)
dma_alloc_init: dma_page @ 0x00338000 - 256 pages at 0x03f00000

Welcome to:
       ____ _  _                   
      /  __| ||_|             _  _ 
 _   _| |  | | _ ____  _   _ \ \/ /
| | | | |  | || |  _ \| | | | \  /
| |_| | |__| || | | | | |_| | /  \
|  ___\____|_||_|_| |_|\____|/_/\_\
|_|                                   

For further information see:
http://www.uclinux.org/
http://blackfin.uclinux.org/



BusyBox v1.4.1 (2007-06-01 17:49:51 CST) Built-in shell (msh)
Enter 'help' for a list of built-in commands.

root:~> 
************** STEP 3: Start testing.

cd /bin
root:/bin> ./erestart_test
./erestart_test: not found
root:/bin> Starting ./erestart_test.exp

************** STEP 1: Spawn kermit

C-Kermit 8.0.211, 10 Apr 2004, for Linux
 Copyright (C) 1985, 2004,
  Trustees of Columbia University in the City of New York.
Type ? or HELP for help.
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set line /dev/ttyS0
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set speed 57600
/dev/ttyS0, 57600 bps
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set carrier-watch off
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set handshake none
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set flow-control none
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>robust
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set file type bin
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set file name lit
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set rec pack 1000
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set send pack 1000
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set window 5
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>set escape 255
(/home/test/checkouts/testsuites.trunk/erestart/) C-Kermit>connect
Connecting to /dev/ttyS0, speed 57600
 Escape character: Code 255 (ÿ): enabled
Type the escape character followed by C to get back,

************** STEP 2: Reboot the kernel.

Try to figure out if we are in u-boot or the kernelversion
or followed by ? to see other options.
----------------------------------------------------
version
Linux release 2.6.21.3-ADI-2007R2-pre-svn3227, build #22 Mon Jun 4 12:17:08 CST 2007
 release 1.0.0, build #30 Mon Jun 4 12:16:30 CST 2007
root:/bin> We are in the kernel
sending reboot
rebooRestarting system.þU-Boot 1.1.6-svn760 (ADI-2007R2-pre) (May 21 2007 - 14:49:32)

CPU:   ADSP BF537 Rev.: 0.2
Board: ADI BF537 stamp board
       Support: http://blackfin.uclinux.org/
Clock: VCO: 500 MHz, Core: 500 MHz, System: 100 MHz
SDRAM: 64 MB
FLASH:   4 MB
In:    serial
Out:   serial
Err:   serial
Net:    BF537 ETHERNET
I2C:   ready
Hit any key to stop autoboot:  9  0 
bf537> set bootargs root=/dev/mtdblock0 rw
bf537> set serverip 10.100.4.174
bf537> set ipaddr 10.100.4.50
bf537> save
Saving Environment to Flash...
Un-Protected 1 sectors
Erasing Flash...
Erasing Flash locations, Please Wait
.
Erased 1 sectors
Writing to Flash... done
Protected 1 sectors
bf537> tftpboot 0x2000000 linux
Using BF537 ETHERNET device
TFTP from server 10.100.4.174; our IP address is 10.100.4.50
Filename 'linux'.
Load address: 0x2000000
Loading: *#################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
	 #################################################################
done
Bytes transferred = 3991036 (3ce5fc hex)
Image size is 3ce5fc
bf537> bootelf
Loading .text @ 0x00001000 (1299404 bytes)
Loading .init @ 0x0013e3cc (2085440 bytes)
Loading .text_l1 @ 0xffa00000 (8476 bytes)
sh_addr: FFA00000, p_paddr: 0033B60C
Loading from: 0233C000 to 0033B60C, size: 8476
Loading .data_l1 @ 0xff800000 (6464 bytes)
sh_addr: FF800000, p_paddr: 0033D728
Loading from: 0233F000 to 0033D728, size: 6464
Loading .data @ 0x0033f080 (69504 bytes)
Clearing .bss @ 0x00350000 (58228 bytes)
## Starting application at 0x0013f000 ...
Linux version 2.6.21.3-ADI-2007R2-pre-svn3227 (test@linux) (gcc version 4.1.2 (ADI svn)) #22 Mon Jun 4 12:17:08 CST 2007
Warning: limiting memory to 56MB due to hardware anomaly 05000263
Blackfin support (C) 2004-2007 Analog Devices, Inc.
Compiled for ADSP-BF537 Rev 0.2
Blackfin Linux support by http://blackfin.uclinux.org/
Processor Speed: 500 MHz core clock and 100 Mhz System Clock
Board Memory: 64MB
Kernel Managed Memory: 64MB
Memory map:
  text      = 0x00001000-0x0013e3cc
  init      = 0x0013f000-0x0033b60c
  data      = 0x0033f080-0x00350000
  stack     = 0x00340000-0x00342000
  bss       = 0x00350000-0x0035e374
  available = 0x0035e374-0x037ff000
  DMA Zone  = 0x03f00000-0x04000000
Instruction Cache Enabled
Data Cache Enabled (write-through)
Hardware Trace Enabled
Built 1 zonelists.  Total pages: 14224
Kernel command line: 
Configuring Blackfin Priority Driven Interrupts
PID hash table entries: 256 (order: 8, 1024 bytes)
Dentry cache hash table entries: 8192 (order: 3, 32768 bytes)
Inode-cache hash table entries: 4096 (order: 2, 16384 bytes)
Physical pages: 37ff
Memory available: 53252k/62211k RAM, (2033k init code, 1268k kernel code, 56k data, 1024k dma)
Blackfin Scratchpad data SRAM: 4 KB
Blackfin Data A SRAM: 16 KB (9 KB free)
Blackfin Data B SRAM: 16 KB (16 KB free)
Blackfin Instruction SRAM: 48 KB (39 KB free)
Security Framework v1.0.0 initialized
Mount-cache hash table entries: 512
NET: Registered protocol family 16
Blackfin GPIO Controller
Blackfin DMA Controller
stamp_init(): registering device resources
NET: Registered protocol family 2
IP route cache hash table entries: 1024 (order: 0, 4096 bytes)
TCP established hash table entries: 2048 (order: 2, 16384 bytes)
TCP bind hash table entries: 2048 (order: 1, 8192 bytes)
TCP: Hash tables configured (established 2048 bind 2048)
TCP reno registered
io scheduler noop registered
io scheduler anticipatory registered (default)
io scheduler cfq registered
Dynamic Power Management Controller Driver v0.1: major=10, minor = 254
bfin-wdt: initialized: timeout=20 sec (nowayout=0)
Serial: Blackfin serial driver
bfin-uart.1: ttyBF0 at MMIO 0xffc00400 (irq = 18) is a BFIN-UART
RAMDISK driver initialized: 16 RAM disks of 4096K size 1024 blocksize
Blackfin mac net device registered
rtc-bfin rtc-bfin: rtc core: registered rtc-bfin as rtc0
TCP cubic registered
NET: Registered protocol family 1
NET: Registered protocol family 17
rtc-bfin rtc-bfin: setting the system clock to 1980-06-22 20:14:40 (330552880)
Freeing unused kernel memory: 2032k freed (0x13f000 - 0x33a000)
dma_alloc_init: dma_page @ 0x00338000 - 256 pages at 0x03f00000

Welcome to:
       ____ _  _                   
      /  __| ||_|             _  _ 
 _   _| |  | | _ ____  _   _ \ \/ /
| | | | |  | || |  _ \| | | | \  /
| |_| | |__| || | | | | |_| | /  \
|  ___\____|_||_|_| |_|\____|/_/\_\
|_|                                   

For further information see:
http://www.uclinux.org/
http://blackfin.uclinux.org/



BusyBox v1.4.1 (2007-06-01 17:49:51 CST) Built-in shell (msh)
Enter 'help' for a list of built-in commands.

root:~> 
************** STEP 3: Start testing.

cd /bin
root:/bin> ./erestart
PASS

Case 1 ...PASS

Case 1 ...PASS


ERESTART TEST ............[PASS]
Ending ./erestart_test.exp

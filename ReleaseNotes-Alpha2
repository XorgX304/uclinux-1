ReleaseNote-alpha2.txt  for the uClinux_dist-2.6.2-BF533-alpha2.tar.bz2
------------------------------------------------------------------

This distribution uClinux_dist-2.6.2-BF533-alpha2.tar.bz2 has

-       2.6.2 kernel
-       uClibc 0.9.26

The following instructions will guide you through the installation
and startup of uClinux Blackfin 2.6.2 development environment.

1.  Install Blackfin uClinux 2.6.2
-----------------------------------

        In any desired directory Check out the distribution from 
		http://cvs.blackfin.uclinux.org/cgi-bin/cvsweb.cgi/?cvsroot=uclinux533
	
	# cvs -z9 -d:ext:developername@cvs.blackfin.uclinux.org:/cvsroot/uclinux533 co uClinux-dist

	(alternatively you can download the distribution from the File section 
		of http://blackfin.uclinux.org/frs/?group_id=17)

2. Blackfin Executable Compilation
---------------------------------

        # cd uClinux-dist
        # make clean
        # make menuconfig, save and exit
        # make

        For EZKIT boards please do the configurations as below.

        #define CONFIG_EZKIT 1
        #define CONFIG_CLKIN 27
        #define CONFIG_BF53x_SCLK_118_MHZ 1
	  
	For STAMP board please do the configurations as below.

        #define CONFIG_BLKFIN_STAMP 1
        #define CONFIG_CLKIN 11
	#define CONFIG_BF53x_SCLK_132_MHZ 1

2.1 Blackfin Executable Location

	Once compilation of the linux 2.6.2 kernel is over find the executable linux.dxe in
	uClinux-dist/linux-2.6.x. This is the file you can download to the target board.

	
3.  Loading and Running the Kernel
----------------------------------

3.1 Serial connections.

	Connect the EZ-KIT to the PC using a 1:1 EIA-232 serial cable.
	For STAMP, Male-Female 1-1 serial cable is required. 
	
	Using minicom or some other serial Communications utility configure the serial port 
	with the following parameters.

        Baud Rate = Baud you have selected in kernel menuconfig
        Number of bits = 8
        Parity = None
        Stop bits = 1
	Flow control = none

3.2  Bootloader Execution.

	Set the BMODE pins of the target to 00 and reset the board to get the bootloader prompt. 
	For further information on how to execute the bootloader please refer to the ReleaseNotes of
	bootloader.

	Make sure that the baud rate chosen should be the same for boot loader and kernel.	
	
	Note - BMODE pins are required for Flash booting.

3.3. Kernel Loading.

	Load the linux.dxe file created in step 2.1 with the following example bootloader commands.
	
		BOOT> tftp 0x1000000 linux.dxe
		BOOT> bootelf 0x1000000

	Assuming linux.dxe produced in the section 2.1 is placed in /tftpboot of your host PC.

	Then, You should see something similar to the following Linux kernel boot messages 
	on the terminal.

---------------------------------------------------------------------------------

Linux version 2.6.2-uc0 (root@localhost.localdomain) (gcc version 3.3.3) #3016 Mon Jul 19 11:05:25 IST 2004
BF533 Blackfin support (C) 2004 Analog Devices, Inc.
uClinux/Blackfin
Blackfin BF533 support by LG Soft India (www.lgsoftindia.com)
Memory map:
  text = 0x000000-0x09a000
  data = 0x09a000-0x2bb940
  bss  = 0x2bb940-0x2bb940
  rootfs = 0x0bb540-0x2bb940
  stack= 0x1000000-0x1000000
Command line: 'root=/dev/mtdblock0 rw'
On node 0 totalpages: 4096
  DMA zone: 0 pages, LIFO batch:1
  Normal zone: 4096 pages, LIFO batch:1
  HighMem zone: 0 pages, LIFO batch:1
Instruction Cache enabled
Building zonelist for node : 0
Kernel command line: root=/dev/mtdblock0 rw
Configuring Blackfin Priority Driven Interrupts
PID hash table entries: 16 (order 4: 128 bytes)
Physical pages: 1000
Memory available: 13384k/15768k RAM, 0k/0k ROM (154k kernel code, 545k data)
Blackfin Scratchpad data SRAM: 4 KB
Calibrating delay loop... 99.32 BogoMIPS
Dentry cache hash table entries: 2048 (order: 1, 8192 bytes)
Inode-cache hash table entries: 1024 (order: 0, 4096 bytes)
Mount-cache hash table entries: 512 (order: 0, 4096 bytes)
RTC: major=10, minor = 135
Real Time Clock Driver v1.10e
POSIX conformance testing by UNIFIX
Linux NoNET1.0 for Linux 2.6
pty: 256 Unix98 ptys configured
BlackFin BF533 serial driver version 1.00
ttyS0 at irq = 21 is a builtin BlackFin BF533 UART
Enabling Serial UART Interrupts
Using anticipatory io scheduler
uclinux[mtd]: RAM probe address=0xbb540 size=0xffdffc00
Creating 1 MTD partitions on "RAM":
0x00000000-0xffdffc00 : "EXT2fs"
uclinux[mtd]: set EXT2fs to be root filesystem
VFS: Mounted root (ext2 filesystem)<NULL>.
Freeing unused kernel memory: 24k freed (0x93000 - 0x98000)
Shell invoked to run file: /etc/rc
Command: hostname blackfin
Command: mount -t proc none /proc
Command: mount -t ext2 /dev/ram0 /var
Command: mkdir var/tmp
Command: mkdir var/log
Command: cat /etc/issue


/etc/issue       www.lgsoftindia.com     30 May 2004


Command: cat /etc/motd

Welcome to:
       ____ _  _
      /  __| ||_|             _  _
 _   _| |  | | _ ____  _   _ \ \/ /
| | | | |  | || |  _ \| | | | \  /
| |_| | |__| || | | | | |_| | /  \
|  ___\____|_||_|_| |_|\____|/_/\_\
|_|

For further information see:
http://www.uclinux.org/
http://blackfin.uclinux.org

Execution Finished, Exiting

Sash command shell (version 1.1.1)
/>


#####################################################################################

4.	Supported  Features	
	
-	Netwok features
		ping,telnet,ftp,ifconfig.
-	File system Support
		- EXt3,EXt2,JFFS2,CRAMFS,ROMFS 
	Please refer linux-2.6.x/Documentation/blackfin/Filesystems for more information
-	Cache Management. Please refer linux-2.6.x/Documentation/blackfin/cachefeature.txt for
	the fetures supported.
-	PDT for CPLB misses.
-	Priority driven Interrupt Management
-	RTC driver and demo application.
-	SRAM support.
-	Page Table is residing in scratchpad data SRAM
-	Support for Allocating large blocks ( > 1 MB) of memory.
-	Configurable BAUD RATE.
-	Tiny Login Support (adduser,passwd,su,sulogin,login)
-	Busybox applications.
-	uClibc (Libc and Libcrypt) support
-	boa web server.	
 

5.     Known Issues.

	- Compiler optimization issues. Some files/directories needs to built with different optimization levels.
		- user applications and uClibc library needs to built with -O0 option for the predictable behaviour.
		- kernel has to be built with -O1
        - telnetd and ftpd crashes the system.
        - Enabling Data cache has some issue in case of EZKIT (Sometimes you may need to hit the enter key to get
		the proper display)
	- Assigning priority Number 7/13 to any devices may crash the system. 
	- cat /proc/kallsyms will crashes the system. REASON - The compiler is not recognising the weak symbols.
	

6.	TODO

        - Dynamic Power management.
        - DMA driver.
        - Usage of L1 SRAM.
	- libm, libpthread.
	- udhcp server testing.
